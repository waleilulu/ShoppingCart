@using Microsoft.EntityFrameworkCore
@model Project0220.ViewModel.CPTModel
@using Project0220.myModels

 <!--引入的檔案-->

  <link rel="stylesheet" href="~/css/Member/css/MemberHome.css">
  <link rel="stylesheet" href="~/css/Member/css/bootstrap.min.css">
 <!--<script src="~/js/Member_/js/MemberHome.js"></script>--> 
  <script src="~/js/Member_/js/jquery.slim.min.js"> </script>
  <script src="~/js/Member_/js/popper.min.js"> </script>
  <script src="~/js/Member_/js/bootstrap.bundle.min.js"> </script>

  <style>
      table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    border: 0.5px solid #c8c3c3;
    padding: 8px;
    text-align: center;
}

/* Style tab links */
.tablink {
    background-color: #dcd0c6;
    color: rgb(64, 61, 61);
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    font-size: 17px;
    width: 33.3% !important;
    border-top: 1px solid rgb(197, 192, 192);
    border-left: 1px solid rgb(197, 192, 192);
    border-right: 1px solid rgb(197, 192, 192);
}
/* Style the tab content (and add height:100% for full page content) */
.tabcontent {
    color: rgb(78, 72, 72);
    display: none;
    padding: 60px 20px; /*內容與上方距離*/
    height: 1000px;
    border-bottom: 1px solid rgb(197, 192, 192);
    border-left: 1px solid rgb(197, 192, 192);
    border-right: 1px solid rgb(197, 192, 192);
    margin-top:20px;
}


    .tablink:hover {
        background-color: white;
    }
    .MEdit{
    background-color:#a18f80;color:white;padding:6px 6px;font-weight:300px;border:none;
    }
    .form2 a{
    color:white;border:none;
    }  
    <!--追蹤表格-->
    .MFollowTable th,tr{
    background-color:#ebeae7;
    }
</style>



<!--Member Section-->

<div class="container" style="margin-top: 30px;padding:5px 0px 5px 0px;">
  <div class="row">
      <div class="col-md-12">
        <div>
    <h2>會員中心</h2> 
    
      </div>

          <button class="tablink Mtab" onclick="openPage('MData', this, 'white')" id="defaultOpen">會員資料</button>
   <!--  <button class="tablink" onclick="openPage('MDiscount', this, 'white')" >購物金</button>  -->
          <button class="tablink Mtab" onclick="openPage('MOrders', this, 'white')">訂單</button>
          <button class="tablink Mtab" onclick="openPage('MFollow', this, 'white')">追蹤商品</button>
      
                  <div id="MData" class="tabcontent">
                      @foreach (var item in Model.Customers)
                      {


                         
                          <span class="m_title">會員資料</span>

                              <!-- 會員資料 -->
      <div class="container">
           <div class="row">
               <div class="col-md-12">

             
                               <div class="form2">
                                   <p><span class="f_title"><b> 姓名 </b> </span><span>   @Html.DisplayFor(modelItem => item.CustomerName)</span></p>
                                   <p><span class="f_title"><b> 生日 </b> </span><span>  @Html.DisplayFor(modelItem => item.DateOfBirth)</span></p>
                                   <p><span class="f_title"><b> 性別 </b> </span><span>   @Html.DisplayFor(modelItem => item.Gender)</span></p>
                                   <p><span class="f_title"><b> 手機 </b> </span><span>   @Html.DisplayFor(modelItem => item.MobilePhoneNumber)</span></p>
                               </div>
                           </div>
                           <div class=" col-md-6 ">
                               <div class="form2">
                                   <p><span class="f_title"><b> 地址 </b> </span><span>@Html.DisplayFor(modelItem => item.AddressCity) @Html.DisplayFor(modelItem => item.AddressDist) @Html.DisplayFor(modelItem => item.Address)</span></p>
                                   <p><span class="f_title"><b> 電子郵件 </b> </span><span> @Html.DisplayFor(modelItem => item.Email)</span></p><br />
                                                 <a asp-action="Edit" asp-route-id=" @item.CustomerId" class="MEdit"><i class="fa-regular fa-pen-to-square"></i>修改會員資料</a>                                            
                               </div>
                           </div>
                       </div>
                   </div>
                


                          
                      }

</div>
 

                  <div id="MOrders" class="tabcontent">
                      <p>Get in touch, or swing by for a cup of coffee.</p>
                  </div>

                  <div id="MFollow" class="tabcontent">
  <!--追蹤商品-->
 <table class="MFollowTable">
<tr>
  <th>產品圖片</th>
  <th>產品名稱</th>
  <th>價格</th>

  <th>顏色</th>
   <th>刪除</th>
</tr>
@foreach (var product in Model.Products)
{
            <tr id="productRow_@product.ProductId">
      <th><img src="~/images/All_product/@product.Image1" style="width:100px";/></th>
      <th>@product.ProductName</th>
      <th>@product.UnitPrice</th>

      <th>@product.Color1</th>
          <th>  
        <button type="button" onclick="confirmDelete('@product.ProductId')"><i class="fa-solid fa-trash-can" style="color: #e51f1f;border:none;background:none;"></i></button>
         </th>
    </tr>

                          }
</table>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>

<!-- MemberHome Section End -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>
   
    function confirmDelete(productId) {
        Swal.fire({
            title: '確定要刪除嗎？',
            text: "",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d2b6b3',
            cancelButtonColor: '#adb7c2',
            confirmButtonText: '確定',
            cancelButtonText: '取消'
        }).then((result) => {
            if (result.isConfirmed) {
               DeleteProduct(productId);
            }
        });
    }
     function DeleteProduct(productId){
     $.ajax({
        url: '/Customers/DeleteProduct',
        type: 'POST',
        data: { productId: productId },
        success: function(response) {
              $('#productRow_' + productId).remove(); 
 
        }
     } ) 
    }


 
</script>
 <!-- 在页面加载时直接设置默认选项卡的样式 -->
<script>

    document.addEventListener("DOMContentLoaded", function () {
        showDefaultTab("MData", "white"); // 设置默认选项卡和颜色
    });

    function showDefaultTab(tabId, color) {
        var tabcontent = document.getElementsByClassName("tabcontent");
        var tablinks = document.getElementsByClassName("tablink");

        // 隐藏所有选项卡内容
        for (var i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }

        // 取消所有选项卡链接的背景颜色
        for (var i = 0; i < tablinks.length; i++) {
            tablinks[i].style.backgroundColor = "";
        }

        // 显示默认选项卡内容并设置背景颜色
        var defaultTab = document.getElementById(tabId);
        if (defaultTab) {
            defaultTab.style.display = "block";
            defaultTab.style.backgroundColor = color;
        }
    }

    // Define the openPage function
 function openPage(pageName, elmnt, color) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
  }
    tablinks = document.getElementsByClassName("tablink");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].style.backgroundColor = "";
  }
    document.getElementById(pageName).style.display = "block";
    elmnt.style.backgroundColor = color;
}

    // Get the element with id="defaultOpen" and click on it
    document.getElementById("defaultOpen").click();

</script>
   <div>
  
    </div>

